{
  "database_name": "sales_order_system",
  "description": "Schema extracted from actual Odoo database structure",
  "tables": [
    {
      "table_name": "contact",
      "description": "Customer contacts",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "name", "type": "VARCHAR(255)"}
      ]
    },
    {
      "table_name": "sales_team",
      "description": "Sales teams",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "name", "type": "VARCHAR(255)"}
      ]
    },
    {
      "table_name": "user",
      "description": "Salesperson users. NO direct team relationship - use sale_order as bridge!",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "name", "type": "VARCHAR(255)"}
      ]
    },
    {
      "table_name": "product_variant",
      "description": "Products",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "name", "type": "VARCHAR(255)"}
      ]
    },
    {
      "table_name": "sale_order",
      "description": "Sales orders - BRIDGE table connecting user, team, and customer",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "name", "type": "VARCHAR(50)"},
        {"name": "date_order", "type": "FLOAT"},
        {"name": "partner_id", "type": "INTEGER", "foreign_key": "contact.id"},
        {"name": "team_id", "type": "INTEGER", "foreign_key": "sales_team.id"},
        {"name": "user_id", "type": "INTEGER", "foreign_key": "user.id"}
      ],
      "relationships": [
        {"foreign_key": "partner_id", "references": "contact.id"},
        {"foreign_key": "team_id", "references": "sales_team.id"},
        {"foreign_key": "user_id", "references": "user.id"}
      ]
    },
    {
      "table_name": "sale_order_line",
      "description": "Order line items",
      "columns": [
        {"name": "id", "type": "INTEGER", "primary_key": true},
        {"name": "order_id", "type": "INTEGER", "foreign_key": "sale_order.id"},
        {"name": "order_partner_id", "type": "INTEGER", "foreign_key": "contact.id"},
        {"name": "product_id", "type": "INTEGER", "foreign_key": "product_variant.id"},
        {"name": "product_uom_qty", "type": "FLOAT"},
        {"name": "price_unit", "type": "FLOAT"},
        {"name": "price_subtotal", "type": "FLOAT"},
        {"name": "price_tax", "type": "FLOAT"},
        {"name": "price_total", "type": "FLOAT"}
      ],
      "relationships": [
        {"foreign_key": "order_id", "references": "sale_order.id"},
        {"foreign_key": "order_partner_id", "references": "contact.id"},
        {"foreign_key": "product_id", "references": "product_variant.id"}
      ]
    }
  ],
  "important_notes": {
    "NO_DIRECT_USER_TEAM_LINK": "user and sales_team are NOT directly connected. Always use sale_order as bridge.",
    "correct_joins": {
      "user_to_team": "FROM user u JOIN sale_order so ON u.id = so.user_id JOIN sales_team st ON so.team_id = st.id",
      "team_to_user": "FROM sales_team st JOIN sale_order so ON st.id = so.team_id JOIN user u ON so.user_id = u.id"
    }
  }
}